{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kevinogidigbo/searchgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kevinogidigbo/searchgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/kevinogidigbo/searchgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";var Context=/*#__PURE__*/React.createContext({users:[],errorMessage:\"\",filterParam:\"\",usersTotalCount:0,username:\"\",isEmptyList:false,isLoading:false,setUsername:function setUsername(username){},setFilterParam:function setFilterParam(filterParam){},setPage:function setPage(page){},page:1,pageCount:0});function ContextProvider(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),usersTotalCount=_useState4[0],setUsersTotalCount=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),username=_useState8[0],setUsername=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),page=_useState10[0],setPage=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),filterParam=_useState12[0],setFilterParam=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isLoading=_useState14[0],setIsLoading=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isEmptyList=_useState16[0],setIsEmptyList=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),pageCount=_useState18[0],setPageCount=_useState18[1];useEffect(function(){if(username!==\"\"){getUsersHandler();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[filterParam,page,username]);var getUsersHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,_response,data,error,_error$response,_error$response2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);// eslint-disable-next-line\n_context.prev=1;_context.next=4;return axios.get(\"https://api.github.com/search/users?q=\".concat(username,\" in:login type:\").concat(filterParam,\"&per_page=9&page=\").concat(page,\"&order=asc\"));case 4:response=_context.sent;data=(_response=response)===null||_response===void 0?void 0:_response.data;setPageCount(Math.ceil((data===null||data===void 0?void 0:data.total_count)/9));setUsers(data===null||data===void 0?void 0:data.items);setUsersTotalCount(data===null||data===void 0?void 0:data.total_count);setErrorMessage(\"\");if((data===null||data===void 0?void 0:data.total_count)===0){setIsEmptyList(true);}else{setIsEmptyList(false);}_context.next=18;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);error=_context.t0;console.log(\"error\",error);if(error===null||error===void 0?void 0:error.response){// Request made and server responded\nsetErrorMessage(\"\".concat(error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,\"  Something went wrong :( \"));console.log(\"Response Error\",error===null||error===void 0?void 0:(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status);}else if(error===null||error===void 0?void 0:error.request){// The request was made but no response was received\nsetErrorMessage(\"Unable to contact server\");}else{// Something happened in setting up the request that triggered an Error\nsetErrorMessage(error===null||error===void 0?void 0:error.message);console.log(\"Message Error\",error.message);}case 18:_context.prev=18;setIsLoading(false);return _context.finish(18);case 21:case\"end\":return _context.stop();}}},_callee,null,[[1,13,18,21]]);}));return function getUsersHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Context.Provider,{value:{users:users,errorMessage:errorMessage,usersTotalCount:usersTotalCount,username:username,isLoading:isLoading,filterParam:filterParam,setUsername:setUsername,setFilterParam:setFilterParam,setPage:setPage,isEmptyList:isEmptyList,page:page,pageCount:pageCount},children:props.children});}export{Context,ContextProvider};","map":{"version":3,"sources":["/Users/kevinogidigbo/searchgit/src/store/context.tsx"],"names":["React","useState","useEffect","axios","Context","createContext","users","errorMessage","filterParam","usersTotalCount","username","isEmptyList","isLoading","setUsername","setFilterParam","setPage","page","pageCount","ContextProvider","props","setUsers","setUsersTotalCount","setErrorMessage","setIsLoading","setIsEmptyList","setPageCount","getUsersHandler","get","response","data","Math","ceil","total_count","items","error","console","log","status","request","message","children"],"mappings":"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","sourcesContent":["import React, { ReactNode, useState, useEffect } from \"react\";\nimport axios, { AxiosError } from \"axios\";\n\ntype Props = {\n  children: ReactNode;\n};\n\nconst Context = React.createContext({\n  users: [],\n  errorMessage: \"\",\n  filterParam: \"\",\n  usersTotalCount: 0,\n  username: \"\",\n  isEmptyList: false,\n  isLoading: false,\n  setUsername: (username: string) => {},\n  setFilterParam: (filterParam: string) => {},\n  setPage: (page: number) => {},\n  page: 1,\n  pageCount: 0,\n});\n\nfunction ContextProvider(props: Props) {\n  const [users, setUsers] = useState([]);\n  const [usersTotalCount, setUsersTotalCount] = useState(0);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n\n  const [page, setPage] = useState(1);\n  const [filterParam, setFilterParam] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [isEmptyList, setIsEmptyList] = useState(false);\n  const [pageCount, setPageCount] = useState(0);\n\n  useEffect(() => {\n    if (username !== \"\") {\n      getUsersHandler();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [filterParam, page, username]);\n\n  const getUsersHandler = async () => {\n    setIsLoading(true);\n    // eslint-disable-next-line\n    let response;\n    try {\n      response = await axios.get(\n        `https://api.github.com/search/users?q=${username} in:login type:${filterParam}&per_page=9&page=${page}&order=asc`\n      );\n\n      const data = response?.data;\n      setPageCount(Math.ceil(data?.total_count / 9));\n      setUsers(data?.items);\n      setUsersTotalCount(data?.total_count);\n      setErrorMessage(\"\");\n\n      if (data?.total_count === 0) {\n        setIsEmptyList(true);\n      } else {\n        setIsEmptyList(false);\n      }\n    } catch (err) {\n      const error = err as AxiosError;\n      console.log(\"error\", error);\n      if (error?.response) {\n        // Request made and server responded\n        setErrorMessage(`${error?.response?.status}  Something went wrong :( `);\n        console.log(\"Response Error\", error?.response?.status);\n      } else if (error?.request) {\n        // The request was made but no response was received\n        setErrorMessage(\"Unable to contact server\");\n      } else {\n        // Something happened in setting up the request that triggered an Error\n        setErrorMessage(error?.message);\n        console.log(\"Message Error\", error.message);\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Context.Provider\n      value={{\n        users,\n        errorMessage,\n        usersTotalCount,\n        username,\n        isLoading,\n        filterParam,\n        setUsername,\n        setFilterParam,\n        setPage,\n        isEmptyList,\n        page,\n        pageCount,\n      }}\n    >\n      {props.children}\n    </Context.Provider>\n  );\n}\n\nexport { Context, ContextProvider };\n"]},"metadata":{},"sourceType":"module"}